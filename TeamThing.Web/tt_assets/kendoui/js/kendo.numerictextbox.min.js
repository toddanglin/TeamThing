/*
* Kendo UI Complete v2012.1.515 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at http://kendoui.com/complete-license
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(a,b){function C(c,d){var e,f=d!==b;if(document.selection){a(c).is(":visible")&&c.focus(),e=document.selection.createRange();if(f)e.move("character",d),e.select();else{var g=c.createTextRange(),h=g.duplicate();g.moveToBookmark(e.getBookmark()),h.setEndPoint("EndToStart",g),d=h.text.length}}else c.selectionStart!==b&&(f?(c.focus(),c.setSelectionRange(d,d)):d=c.selectionStart);return d}function B(a,b){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-arrow-'+a+'" title="'+b+'">'+b+"</span></span>"}var c=window.kendo,d=c.keys,e=c.ui,f=e.Widget,g=c.parseFloat,h=c.support.touch,i="change",j="disabled",k="k-input",l="spin",m="touchend",n=h?"touchstart":"mousedown",o=h?"touchmove "+m:"mouseup mouseleave",p="k-state-default",q="k-state-focused",r="k-state-hover",s="mouseenter mouseleave",t=".",u="k-state-selected",v="k-state-disabled",w=h?"number":"text",x=null,y=a.proxy,z={190:".",188:","},A=f.extend({init:function(a,d){var e=this,h=d&&d.step!==b,i,j,l,m,n;f.fn.init.call(e,a,d),d=e.options,a=e.element.addClass(k).bind({keydown:y(e._keydown,e),paste:y(e._paste,e),blur:y(e._focusout,e)}),a.closest("form").bind("reset",function(){setTimeout(function(){e.value(a[0].value)})}),e._wrapper(),e._arrows(),e._input(),e._text.focus(y(e._click,e)),i=g(a.attr("min")),j=g(a.attr("max")),l=g(a.attr("step")),d.min===x&&i!==x&&(d.min=i),d.max===x&&j!==x&&(d.max=j),!h&&l!==x&&(d.step=l),n=d.format,n.slice(0,3)==="{0:"&&(d.format=n.slice(3,n.length-1)),m=d.value,e.value(m!==x?m:a.val()),e.enable(!a.is("[disabled]")),c.notify(e)},options:{name:"NumericTextBox",decimals:x,min:x,max:x,value:x,step:1,format:"n",placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[i,l],enable:function(a){var b=this,c=b._text.add(b.element),d=b._inputWrapper.unbind(s),e=b._upArrow.unbind(n),f=b._downArrow.unbind(n);b._toggleText(!0),a===!1?(d.removeClass(p).addClass(v),c.attr(j,j)):(d.addClass(p).removeClass(v).bind(s,b._toggleHover),c.removeAttr(j),e.bind(n,function(a){a.preventDefault(),b._spin(1),b._upArrow.addClass(u)}),f.bind(n,function(a){a.preventDefault(),b._spin(-1),b._downArrow.addClass(u)}))},value:function(a){var c=this,d;if(a===b)return c._value;a=g(a),d=c._adjust(a);a===d&&(c._update(a),c._old=c._value)},_adjust:function(a){var b=this,c=b.options,d=c.min,e=c.max;d!==x&&a<d?a=d:e!==x&&a>e&&(a=e);return a},_arrows:function(){var b=this,d,e=b.options,f=b.element;d=f.siblings(".k-icon"),d[0]||(d=a(B("up",e.upArrowText)+B("down",e.downArrowText)).insertAfter(f),d.wrapAll('<span class="k-select"/>')),d.bind(o,function(a){(!h||c.eventTarget(a)!=a.currentTarget||a.type===m)&&clearTimeout(b._spinning),d.removeClass(u)}),b._upArrow=d.eq(0),b._downArrow=d.eq(1)},_blur:function(){var a=this;a._toggleText(!0),a._change(a.element.val())},_click:function(a){var b=this;clearTimeout(b._focusing),b._focusing=setTimeout(function(){var c=a.target,d=C(c),e=c.value.substring(0,d),f=b._format(b.options.format),g=f[","],h=new RegExp("\\"+g,"g"),i=new RegExp("([\\d\\"+g+"]+)(\\"+f[t]+")?(\\d+)?"),j=i.exec(e),k=0;j&&(k=j[0].replace(h,"").length,e.indexOf("(")!=-1&&b._value<0&&k++),b._focusin(),C(b.element[0],k)})},_change:function(a){var b=this;b._update(a),a=b._value,b._old!=a&&(b._old=a,b.trigger(i),b.element.trigger(i))},_focusin:function(){var a=this;a._toggleText(!1),a.element.focus(),a._inputWrapper.addClass(q)},_focusout:function(){var a=this;clearTimeout(a._focusing),a._inputWrapper.removeClass(q),a._blur()},_format:function(a){var b=c.culture().numberFormat;a.toLowerCase().indexOf("c")>-1?b=b.currency:a.toLowerCase().indexOf("p")>-1&&(b=b.percent);return b},_input:function(){var b=this,c="k-formatted-value",d=b.element.show()[0],e=b.wrapper,f;f=e.find(t+c),f[0]||(f=a("<input />").insertBefore(d).addClass(c)),d.type=w,f[0].type="text",f[0].style.cssText=d.style.cssText,b._text=f.attr("readonly",!0).addClass(d.className)},_keydown:function(a){var b=this,c=a.keyCode;c==d.DOWN?b._step(-1):c==d.UP?b._step(1):c==d.ENTER&&b._change(b.element.val()),b._prevent(c)&&!a.ctrlKey&&a.preventDefault()},_paste:function(a){var b=this,c=a.target,d=c.value;setTimeout(function(){g(c.value)===x&&b._update(d)})},_prevent:function(a){var b=this,c=b.element[0],e=c.value,f=b.options,g=f.min,h=b._format(f.format),i=h[t],j=f.decimals,k=C(c),l=!0,m;j===x&&(j=h.decimals),a>16&&a<21||a>32&&a<37||a>47&&a<58||a>95&&a<106||a==d.INSERT||a==d.DELETE||a==d.LEFT||a==d.RIGHT||a==d.TAB||a==d.BACKSPACE||a==d.ENTER?l=!1:z[a]===i&&j>0&&e.indexOf(i)==-1?l=!1:!(g===x||g<0)||e.indexOf("-")!=-1||a!=189&&a!=109||k!==0?a==110&&j>0&&e.indexOf(i)==-1&&(m=e.substring(k),c.value=e.substring(0,k)+i+m):l=!1;return l},_spin:function(a,b){var c=this;b=b||500,clearTimeout(c._spinning),c._spinning=setTimeout(function(){c._spin(a,50)},b),c._step(a)},_step:function(a){var b=this,c=b.element,d=g(c.val())||0;document.activeElement!=c[0]&&b._focusin(),d+=b.options.step*g(a),b._update(b._adjust(d)),b.trigger(l)},_toggleHover:function(b){h||a(b.currentTarget).toggleClass(r,b.type==="mouseenter")},_toggleText:function(a){var b=this;a=!!a,b._text.toggle(a),b.element.toggle(!a)},_update:function(a){var b=this,d=b.options,e=d.format,f=d.decimals,h=b._format(e),i;f===x&&(f=h.decimals),a=g(a),i=a!==x,i&&(a=parseFloat(a.toFixed(f))),b._value=a=b._adjust(a),b._text.val(i?c.toString(a,e):d.placeholder),b.element.val(i?a.toString().replace(t,h[t]):"")},_wrapper:function(){var b=this,c=b.element,d;d=c.parents(".k-numerictextbox"),d.is("span.k-numerictextbox")||(d=c.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),d=d.wrap("<span/>").parent()),d[0].style.cssText=c[0].style.cssText,c[0].style.width="",b.wrapper=d.addClass("k-widget k-numerictextbox").show(),b._inputWrapper=a(d[0].firstChild)}});e.plugin(A)})(jQuery)