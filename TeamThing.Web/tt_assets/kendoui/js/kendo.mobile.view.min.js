/*
* Kendo UI Complete v2012.1.515 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at http://kendoui.com/complete-license
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(a,b){var c=window.kendo,d=c.mobile,e=d.ui,f=c.history,g=c.attr,h=c.Class,i=e.Widget,j="init",k="show",l="hide",m=c.roleSelector,n=i.extend({init:function(a,b){var d=this,f=m("content"),h;i.fn.init.call(d,a,b),a=d.element,d.layout=b.layout,d.application=b.application,d.element.data("kendoView",d).addClass("km-view"),d.header=a.find(m("header")).addClass("km-header"),d.footer=a.find(m("footer")).addClass("km-footer"),a.has(f)[0]||a.wrapInner("<div "+g("role")+'="content"></div>'),d.content=a.find(m("content")).addClass("km-content"),d.element.prepend(d.header).append(d.footer),d.id=a.data(c.ns+"url")||"#"+a.attr("id"),d.layout&&d.layout.setup(d),h=b.model,typeof h=="string"&&(h=c.getter(h)(window)),d.model=h,h?c.bind(a.children(),h,e):c.mobile.init(a.children()),d.content.kendoMobileScroller(),d.scroller=d.content.data("kendoMobileScroller"),d.scrollerContent=d.scroller.scrollElement,d.trigger(j,{view:d}),d._eachWidget(function(a){a.viewInit(d)})},events:[j,k,l],options:{name:"View",title:"",model:null},onHideStart:function(){var a=this;a.layout&&a.layout.detach(a)},onShowStart:function(){var a=this;a.element.css("display",""),a.params=f.url().params,a.layout&&a.layout.attach(a),a._eachWidget(function(b){b.viewShow(a)}),a.trigger(k,{view:a})},_eachWidget:function(b){var d;this.element.find("[data-"+c.ns+"role]").each(function(){d=c.widgetInstance(a(this),e),d&&b(d)})}}),o=h.extend({init:function(a){this.application=a},replace:function(a,b){var c=this,d=function(){c.application.transitioning=!1,a.element.hide(),a.trigger(l,{view:a})},e;c.back=b.nextView===a&&JSON.stringify(b.params)===JSON.stringify(f.url().params),e=c.application.dataOrDefault((c.back?a:b).element,"transition"),c.parallax=e==="slide",a.onHideStart(),b.onShowStart(),c.back&&!c.parallax?(b.element.css("z-index",0),a.element.css("z-index",1)):(b.element.css("z-index",1),a.element.css("z-index",0)),c.switchWith(a.footer,b.footer),c.switchWith(a.header,b.header),c.contents(a,b).kendoAnimateTo(c.contents(b,a),{effects:e,reverse:c.back,complete:d}),c.back||(a.nextView=b)},contents:function(a,b){var c;this.parallax?(c=a.content,b.header[0]||(c=c.add(a.header)),b.footer[0]||(c=c.add(a.footer))):c=a.element;return c},switchWith:function(a,b){a[0]&&b[0]&&a[0]!=b[0]&&this.parallax&&a.kendoAnimateTo(b,{effects:"fade"})}}),p=i.extend({init:function(a,b){var d=this;i.fn.init.call(d,a,b),a=d.element,d.element=a.detach(),d.header=a.find(m("header")).addClass("km-header"),d.footer=a.find(m("footer")).addClass("km-footer"),d.elements=d.header.add(d.footer),c.mobile.init(d.element.children()),d.trigger(j,{layout:d})},options:{name:"Layout"},events:[j,k,l],setup:function(a){a.header[0]||(a.header=this.header),a.footer[0]||(a.footer=this.footer)},detach:function(a){var b=this;a.header===b.header&&a.element.prepend(b.header.detach().clone(!0)),a.footer===b.footer&&a.element.append(b.footer.detach().clone(!0)),b.trigger(l,{layout:b,view:a})},attach:function(a){var b=this;a.header===b.header&&(b.header.detach(),a.element.find(m("header")).remove(),a.element.prepend(b.header)),a.footer===b.footer&&(b.footer.detach(),a.element.find(m("footer")).remove(),a.element.append(b.footer)),b.trigger(k,{layout:b,view:a})}});e.plugin(n),e.plugin(p),d.ViewSwitcher=o})(jQuery)